name: "Bluetooth Audio Manager"
version: "0.1.97"
slug: bluetooth_audio_manager
description: "Manage Bluetooth audio device connections (A2DP) with persistent pairing, auto-reconnect, and AppArmor security."
url: "https://github.com/scyto/ha-bluetooth-audio-manager"
image: "ghcr.io/scyto/ha-bluetooth-audio-manager/{arch}"
arch:
  - aarch64
  - amd64
  - armv7
  - armhf
init: false
startup: services
boot: auto

# Permissions (least privilege)
host_dbus: true
audio: true
privileged:
  - NET_ADMIN
  - NET_RAW

# Ingress UI
ingress: true
ingress_port: 8099
panel_icon: "mdi:bluetooth-audio"
panel_title: "BT Audio"

# MPD media player (port exposed for HA's MPD integration)
ports:
  "6600/tcp": 6600
ports_description:
  "6600/tcp": "MPD server for HA MPD integration"

# Storage
map:
  - type: data
    read_only: false

# User options (runtime settings like auto_reconnect are in the add-on UI)
options:
  log_level: "info"
  bt_adapter: "auto"

schema:
  log_level: "list(debug|info|warning|error)"
  bt_adapter: "str"

apparmor: true
watchdog: "http://[HOST]:[PORT:8099]/api/health"

# Build stage
stage: stable
