name: "Bluetooth Audio Manager"
version: "0.1.90"
slug: bluetooth_audio_manager
description: "Manage Bluetooth audio device connections (A2DP) with persistent pairing, auto-reconnect, and AppArmor security."
url: "https://github.com/scyto/ha-bluetooth-audio-manager"
image: "ghcr.io/scyto/ha-bluetooth-audio-manager/{arch}"
arch:
  - aarch64
  - amd64
  - armv7
  - armhf
init: false
startup: services
boot: auto

# Permissions (least privilege)
host_dbus: true
audio: true
privileged:
  - NET_ADMIN
  - NET_RAW

# Ingress UI
ingress: true
ingress_port: 8099
panel_icon: "mdi:bluetooth-audio"
panel_title: "BT Audio"

# Storage
map:
  - type: data
    read_only: false

# User options
options:
  log_level: "info"
  auto_reconnect: true
  reconnect_interval_seconds: 30
  reconnect_max_backoff_seconds: 300
  keep_alive_enabled: false
  keep_alive_method: "infrasound"
  scan_duration_seconds: 30
  bt_adapter: "auto"

schema:
  log_level: "list(debug|info|warning|error)"
  auto_reconnect: bool
  reconnect_interval_seconds: "int(5,600)"
  reconnect_max_backoff_seconds: "int(60,3600)"
  keep_alive_enabled: bool
  keep_alive_method: "list(silence|infrasound)"
  scan_duration_seconds: "int(5,60)"
  bt_adapter: "str"

apparmor: true
watchdog: "http://[HOST]:[PORT:8099]/api/health"
